(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class M{constructor(){this.board=Array.from({length:9},()=>Array(9).fill(0)),this.solution=null}generateBoard(t="easy"){this.fillBoard(this.board),this.solution=this.board.map(n=>[...n]);let e=5,r;switch(t){case"medium":r=40;break;case"hard":r=50;break;case"easy":default:r=30;break}for(;r>0&&e>0;){let n=Math.floor(Math.random()*9),o=Math.floor(Math.random()*9);for(;this.board[n][o]===0;)n=Math.floor(Math.random()*9),o=Math.floor(Math.random()*9);let l=this.board[n][o];this.board[n][o]=0;let a=this.board.map(I=>[...I]),c=0;this.solve(a,()=>c++),c!==1?(this.board[n][o]=l,e--):r--}return this.board}fillBoard(t){const e=this.findEmpty(t);if(!e)return!0;const[r,n]=e,o=this.shuffle([1,2,3,4,5,6,7,8,9]);for(let l of o)if(this.isValid(t,r,n,l)){if(t[r][n]=l,this.fillBoard(t))return!0;t[r][n]=0}return!1}solve(t,e){const r=this.findEmpty(t);if(!r)return e&&e(),!0;const[n,o]=r;for(let l=1;l<=9;l++)if(this.isValid(t,n,o,l)){if(t[n][o]=l,this.solve(t,e)&&!e)return!0;t[n][o]=0}return!1}findEmpty(t){for(let e=0;e<9;e++)for(let r=0;r<9;r++)if(t[e][r]===0)return[e,r];return null}isValid(t,e,r,n){for(let a=0;a<9;a++)if(t[e][a]===n&&a!==r)return!1;for(let a=0;a<9;a++)if(t[a][r]===n&&a!==e)return!1;const o=Math.floor(e/3)*3,l=Math.floor(r/3)*3;for(let a=0;a<3;a++)for(let c=0;c<3;c++)if(t[a+o][c+l]===n&&(a+o!==e||c+l!==r))return!1;return!0}shuffle(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}checkWin(t){for(let e=0;e<9;e++)for(let r=0;r<9;r++)if(t[e][r]===0||!this.isValid(t,e,r,t[e][r]))return!1;return!0}}const m=new M;let d=[],y=[],i=null,h,u=0,p=0;const B=3,E=document.getElementById("board"),k=document.getElementById("difficulty"),C=document.getElementById("new-game-btn"),L=document.getElementById("timer"),S=document.getElementById("mistakes"),x=document.querySelectorAll(".num-btn"),A=document.getElementById("erase-btn"),b=document.getElementById("check-btn");function v(){const s=k.value,t=m.generateBoard(s);y=t.map(e=>[...e]),d=t.map(e=>[...e]),p=0,u=0,w(),q(),O(),g(null)}function O(){E.innerHTML="";for(let s=0;s<9;s++)for(let t=0;t<9;t++){const e=document.createElement("div");e.classList.add("cell"),e.dataset.row=s,e.dataset.col=t;const r=d[s][t];r!==0&&(e.textContent=r,y[s][t]!==0?e.classList.add("initial"):e.classList.add("user-input")),e.addEventListener("click",()=>g(e)),E.appendChild(e)}}function g(s){if(i&&(i.classList.remove("selected"),document.querySelectorAll(".cell").forEach(t=>t.classList.remove("highlighted"))),i=s,s){s.classList.add("selected");const t=s.textContent;t&&T(t)}}function T(s){document.querySelectorAll(".cell").forEach(t=>{t.textContent===s&&t.classList.add("highlighted")})}function f(s){if(!i)return;const t=parseInt(i.dataset.row),e=parseInt(i.dataset.col);if(y[t][e]===0){if(s===0){d[t][e]=0,i.textContent="",i.classList.remove("user-input","error");return}m.solution[t][e]===s?(d[t][e]=s,i.textContent=s,i.classList.add("user-input"),i.classList.remove("error"),m.checkWin(d)&&(clearInterval(h),setTimeout(()=>alert("Congratulations! You won!"),100))):(p++,w(),i.textContent=s,i.classList.add("error"),p>=B&&(clearInterval(h),setTimeout(()=>{alert("Game Over! Too many mistakes."),v()},100))),i&&g(i)}}function w(){S.textContent=p}function q(){clearInterval(h),L.textContent="00:00",h=setInterval(()=>{u++;const s=Math.floor(u/60).toString().padStart(2,"0"),t=(u%60).toString().padStart(2,"0");L.textContent=`${s}:${t}`},1e3)}C.addEventListener("click",v);x.forEach(s=>{s.addEventListener("click",()=>{const t=parseInt(s.dataset.num);f(t)})});A.addEventListener("click",()=>f(0));b.addEventListener("click",()=>{if(!i)return;const s=parseInt(i.dataset.row),t=parseInt(i.dataset.col);y[s][t]===0&&f(m.solution[s][t])});document.addEventListener("keydown",s=>{if(!i)return;const t=s.key;if(t>="1"&&t<="9")f(parseInt(t));else if(t==="Backspace"||t==="Delete")f(0);else if(t.startsWith("Arrow")){const e=parseInt(i.dataset.row),r=parseInt(i.dataset.col);let n=e,o=r;t==="ArrowUp"&&(n=Math.max(0,e-1)),t==="ArrowDown"&&(n=Math.min(8,e+1)),t==="ArrowLeft"&&(o=Math.max(0,r-1)),t==="ArrowRight"&&(o=Math.min(8,r+1));const l=document.querySelector(`.cell[data-row="${n}"][data-col="${o}"]`);l&&g(l)}});v();
